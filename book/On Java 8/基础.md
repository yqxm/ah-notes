# 基础

## 对象

通过“引用”来操作对象。“引用”用来连接对象，`new`用来创建对象。

### 存储在哪里？

程序运行的时候有几个地方可已存储数据：

- 寄存器
- 栈：Java 系统在创建应用程序时就必须明确栈上所有对象的生命周期。这种限制约束了程序的灵活性，因此虽然有一些数据会保存在栈上（尤其是对象引用），对象本身却并非如此。
- 堆：一个通用的内存池（使用的也是RAM空间），用于存放所有 Java 对象。
- 常量存储：常量通常会直接保存在程序代码中，因为它们的值不会改变
- 非RAM存储：如果一段数据没有保存在应用程序里，那么该数据的生命周期既不依赖于应用程序是否运行，也不受应用程序的管制。例如序列化对象，持久化对象。

对于基本类型，Java对它们的处理和C/C++一样，不使用`new`,直接存储在栈中。

### 生命周期

作用域中定义的引用在作用域结束后就会被销毁。而对象在作用域结束后会依然存在，等到它不再被引用时会被gc销毁释放。（gc只管理`new`创建的对象）

### 类

类是对象特性的描述。包含字段和函数，描述对象的状态和功能。

对于基本类型的字段，会对它们进行默认初始化。

`static`关键字可以创建独立于对象只关于类的字段和方法。

## 操作符

大多数操作符都只能操作基本类型，除了=，!=，==。另外，+可以操作`String`类型。

操作符有优先级，乘除优先加减，其他的忘了就用括号。括号的优先级最高。

### 赋值

使用=来赋值。

由于基本类型的特殊性，赋值给基本类型其实就是复制内容。而对于对象来说，则是将对象的引用复制了过去。

### 数学

加减乘除，模运算。

### 关系运算符

大于，小于，等于，不大于，不小于，不等于

#### ==

对整数-128到127赋值给包装类`Integer`产生的对象指向的对象是相同的。

例子：

```Java
// a == b true
Integer a = 127;
Integer b = 127;
// c == d false
Integer c = 128;
Integer d = 128;
```

对浮点数来说，微小的精度不一样都会导致不相等。

### 逻辑运算符

&&  ||  !

它们是短路的

### 字面量

字面量尾部添加L,F,D分别表示long,float,double。 （大小写都可以）

字面量前面添加0x,0,0b表示十六进制，八进制，二进制。（大小写都可以）

可以给字面量添加下划线来方便阅读

### 位级

& | ^ ~

前三个在进行布尔运算时和逻辑运算符一样，不过两边都要算。

### 移位

`<<` 左移

`>>`右移最高位补符号位

`>>>`最高位补0

对`char`,`byte`,`short`移位会先将它们转换为`int`。只有最右边五位会使用到?，结果为`int`

对`long`移位，只有最右边六位会使用到?，结果为`long`

## 初始化和清理

### 构造方法

使用构造方法初始化对象。零参构造方法在没有自定义构造方法时会作为默认构造方法，不需要显示定义。自定义构造方法之后，零参构造方法就不能直接使用了。

方法重载：方法名相同，参数列表不同。任何方法都可以使用这个特性，构造方法也是，所以通过方法重载，你可以通过多种方式创建对象。
为什么返回值不能作为区别方法的条件？因为Java中可以只调方法而不管返回值，这时候就无法和另一个参数相同无返回值的方法进行区分。

### this

this是对当前对象的引用，所以不能用在static方法里。使用对象调用方法时，对象的引用作为参数传入方法，告诉是哪个对象在调用方法。

在构造器中可以通过this调用别的构造方法

### 清理

`finalize()`在对象被gc回收的时候会被调用。gc的行为只和内存相关，它什么时候清理对象不能预测。所以当你不需要某个对象的时候进行一些行为的代码，不应该放在`finalize()`里。你不需要对象的时间和gc的时间不一致。
`finalize()`应该也只和内存相关。当你的对象使用*native method*申请了内存时，你使用`finalize()`对它们进行清理。
不过`finalize()`还有一个用法，避免不应该被回收的对象被回收了。你可以在`finalize()`里面对这个状态进行验证

### 初始化

作为对象中的字段，如果只声明，在使用的时候基本类型为默认值，对象引用为null；

字段的初始化在所有方法之前，包括构造方法。

#### static初始化

如果static字段还没被初始化，那么它们最先初始化，然后才是非static字段。
可以使用静态代码块对static字段进行初始化，和其他static初始化一样，它只执行一次：在第一次创建这个类的对象的时候或者第一次使用这个类的静态变量。

#### 非static初始化

非静态代码块初始化字段。每次创建对象都会执行一次

## 重用

- 组合：将重用的对象放在字段里
- 继承：使用extends关键字。子类继承父类
- 代理：引用要代理的对象，可以只使用代理对象的部分方法。

### final关键字

#### final Data

final修饰的东西在初始化之后不能改变。
final修饰基本类型的数据，数据不能更改。修饰对象，表示这个对象的引用不能更改，但对象本身还是可以变化。
final修饰方法参数，表示这个参数的引用不能更改。

#### final method

表示这个方法不能被继承重写

#### final classes

表示这个类不能被继承

### 继承中的初始化

加载过程中，先初始化根类的静态字段，再初始化子类的静态字段。加载完成了之后可以创建对象，先初始化根类的非静态字段，然后创建根类对象，然后是子类非静态字段，子类对象。
