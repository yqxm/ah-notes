# 浮点数的表示
## 浮点数的编码方式

浮点表示对形如$V=x \times 2^y$ 的有理数进行编码。

### IEEE浮点表示

IEEE标准用 $V = (-1)^s \times M \times 2^E$ 来表示一个数。

其中：

- $S$表示符号位
- $M$表示一个二进制小数
- $E$表示阶数

将浮点数的位表示划分位3个字段来对上面这些值进行编码:

- 一个单独的符号位 $s$来表示$S$
- $k$ 位的阶码字段 $exp = e_{k-1}e_{k-2}\cdots e_1e_0$来编码阶码$E$
- $n$ 位的小数字段来表示 $frac = f_{n-1}f_{n-2}\cdots f_1f_0$ 来编码$M$

单精度浮点格式中有 $k=8$, $n=23$, 加上符号位一共32位

双精度浮点格式中有 $k=11$, $n=52$，加上符号位一共64位

给定位表示，根据 $exp$ 的值，编码可以分为3种情况

#### 情况1: 规格化的值

当 $exp$ 的位模式既不全为0也不全为1时。在这种情况下，阶码字段被解释为以偏置形式表示的有符号整数，也就是说阶码的值 $E=e-Bias$ 其中 $e$ 是无符号数，$Bias$ 是一个等价于 $2^{k-1}-1$ 的偏置量。

小数字段被解释为描述小数值 $f$ ,其中 $0 \leq f < 1$ ,其二进制表示位 $0.f_{n-1}\cdots f_1f_0$ 。$M$ 被定义为 $M=1+f$ 。因为可以调整阶码 $E$ , 保证 $M$ 在1到2之间，我们就获得了一个精度位，1不用显式地表示。

#### 情况2:非规格化的值

当阶码域全位0时，所表示的数就是非规格化形式。在这种情况下，阶码值是 $E=1-Bias$ ,而尾数的值是 $M=f$ ,也就是小数字段的值，不包含开头的1。

非规格化有两个用途。首先，它提供了一个表示0的方法，因为规格化的数总是大于1的。另一个功能是表示非常接近0的数。

#### 情况3:特殊值

当阶码全为1，小数域全为0表示无穷，符号位表示正或负。

当阶码全为1，小数域为其他数是，结果为 $NaN$ ,表示不是一个数