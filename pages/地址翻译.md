- **符号**
	- ![image.png](../assets/image_1656303542761_0.png){:height 364, :width 394}
- 形式上来说，地址翻译是一个$N$元素的虚拟地址空间(VAS)中的元素和一个$M$元素的物理地址空间(PAS)中元素之间的映射
	- $$\text{MAP}: \text{VAS} \to \text{PAS} \cup \varnothing$$
		- 如果虚拟地址$A$处的数据在PAS的物理地址$A^{\prime}$处，则$\text{MAP}(A) = A^{\prime}$
		- 如果虚拟地址$A$处的数据不在物理内存中，则$\text{MAP}(A) = \varnothing$
	- **使用页表的地址翻译**
		- ![image.png](../assets/image_1656304505868_0.png)
		- CPU中的一个控制寄存器，**页表基址寄存器**(Page Table Base Register，PBTR)指向当前页表。
		- $n$位的虚拟地址包含两个部分: 一个$p$位的**虚拟页面偏移**(Virtual Page Offset，VPO)和一个$(n-p)$位的**虚拟页号**(Virtual Page Number，VPN)。
		- MMU利用VPN来选择适当的PTE。例如，VPN 0 选择 PTE 0，依次类推。将页表条目中的**物理页号**(Physical Page Number，PPN)和虚拟地址中的VPO串联起来，就得到相应的物理地址。
		- 因为物理和虚拟页面都是$P$字节的，所以**物理页面偏移**(Physical Page Offset，PPO)和VPO是相同的。
	- **页面命中时，CPU硬件执行的步骤**
		- ![image.png](../assets/image_1656305395625_0.png)
	- **页面命中和缺页的操作**
		- ![image.png](../assets/image_1656305488648_0.png)
- ## 结合高速缓存和虚拟内存
	- 大多数系统使用物理地址来访问SRAM高速缓存。
		- 使用物理寻址，多个进程可以方便的同时在高速缓存中有存储块和共享来自相同虚拟页面的块。
		- 高速缓存无需处理保护问题。
	- **物理寻址的高速缓存和虚拟内存结合**
		- ![image.png](../assets/image_1656306289707_0.png)
			- 地址翻译发生在高速缓存查找之前。注意，页表条目可以缓存。
- ## 利用TLB加速地址翻译
	-