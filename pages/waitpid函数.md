- ```C
  #include <sys/types.h>
  #include <sys/wait.h>
  
  pid_t waitpid(pid_t pid, int *statusp, int options);
  ```
- 以下两种情况`waitpid`都会返回导致它返回的子进程的`PID`。这时，已终止的子进程会被回收，内核会删除掉它们所有的痕迹
	- 默认情况下(当`options=0`时)，`waitpid`挂起调用进程的执行，直到它的**等待集合**中的某个子进程终止。
	- 如果等待集合中的一个进程在调用的时候就已经终止了，那么`waitpid`就立即返回。
- **判定等待集合中的成员**
	- 如果参数`pid > 0`，那么等待集合就是这个子进程。
	- 如果参数`pid=0`，则等待与调用进程同一个进程组的所有子进程。
	- 如果参数`pid = -1`，那么等待集合就是它所有的子进程。
	- 如果参数`pid<-1`，则会等待进程组标识符与`pid`绝对值相等的所有子进程。
- **修改默认行为**
	- 可以通过修改`options`的值来修改默认行为，有以下常量：
		- `WNOHANG` 如果等待集合中的任何子进程都还没有终止，那么就立即返回。
			- 默认行为：挂起调用进程，直到某个子进程终止。
			- 等待子进程终止的同时，如果还有其他工作要做，这个选项会有用。
		- `WUNTRACED` 挂起调用进程的执行，直到等待集合中的一个进程变成已终止或者被停止。
			- 默认行为：只返回已终止的子进程。
			- 返回的`PID`为导致返回的已终止或者被停止的子进程的`PID`
			- 如果要检查终止的子进程，这个选项会有用
		- `WCONTINUED` 挂起调用进程的执行，直到等待集合中一个正在运行的进程终止或等待集合中一个被终止的进程收到`SIGCONT`信号重新开始执行
	- 可以用或运算将这些选项组合起来
		- `WNOHANG | WUNTRACED` 如果等待集合中的子进程都还没有终止或被停止就立即返回，返回值为0。或者，等待集合中的一个进程变成终止或被停止，返回它的`PID`
- **检查已回收子进程的退出状态**
	- 如果`statusp`参数非空，那么`waitpid`就会在`statusp`中放上关于导致返回的子进程的状态信息。
	- `wait.h`头文件定义了解释`statusp`的几个宏：
		- `WIFEXITED(status)` 如果子进程通过调用`exit`或者一个返回`return`正常终止，就返回真
		- `WEXITSTATUS(status)` 返回一个正常终止的子进程的退出状态。只有在`WIFEXITED()`返回为真的情况下，才会定义这个状态。
		- `WIFSIGNAILED(status)` 如果子进程是因为一个未被捕获的信号终止的，那么返回为真。
		- `WTERMSIG(status)` 返回导致子进程终止的信号的编号。只有在`WIFSIGNAILED()`为真的情况下才会定义这个状态。
		- `WIFSTOPPED(status)` 如果引起返回的子进程当前是停止的，那么返回为真。
		- `WSTOPSIG(status)` 返回引起子进程停止的信号的编号。只有在`WIFSTOPPED()`为真的情况下才会定义这个状态。
		- `WIFCONTINUED(status)` 如果子进程收到`SIGCONT`信号重新启动，则返回真。
- **错误条件**
	- 如果调用进程没有子进程，那么`waitpid`返回-1，并且设置`errno`为`ECHILD`。
	- 如果`waitpid`函数被一个信号中断，那么它返回-1，并且设置`errno`为`EINTR`。